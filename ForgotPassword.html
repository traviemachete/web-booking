<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h2 class="auth-title">р╕ер╕╖р╕бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</h2>
      <p class="auth-subtitle">р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕ер╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣И</p>
    </div>
    <form id="forgotForm" class="auth-form">
      <div class="form-group">
        <label for="forgotEmail">р╕нр╕╡р╣Ар╕бр╕е</label>
        <input type="email" id="forgotEmail" name="email" class="form-input" required>
      </div>
      <div class="form-group">
        <label for="newPassword">р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣И</label>
        <input type="password" id="newPassword" name="password" class="form-input" required minlength="6">
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">ЁЯФР р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</button>
        <button type="button" class="btn btn-secondary" onclick="loadView('login')">р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ъ</button>
      </div>
    </form>
  </div>
</div>

<script>
  document.getElementById("forgotForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const email = document.getElementById("forgotEmail").value.trim();
    const newPassword = document.getElementById("newPassword").value.trim();

    if (!email || !newPassword) {
      Swal.fire({ icon: "warning", title: "р╕Бр╕гр╕╕р╕Ур╕▓р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╣Йр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ" });
      return;
    }

    google.script.run
      .withSuccessHandler(() => {
        Swal.fire({
          icon: "success",
          title: "р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╕кр╕│р╣Ар╕гр╣Зр╕И",
          text: "р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Фр╣Йр╕зр╕вр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з",
        }).then(() => loadView('login'));
      })
      .withFailureHandler((err) => {
        Swal.fire({
          icon: "error",
          title: "р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф",
          text: err.message || "р╣Др╕бр╣Ир╕Юр╕Ър╕нр╕╡р╣Ар╕бр╕ер╣Гр╕Щр╕гр╕░р╕Ър╕Ъ",
        });
      })
      .forgotPasswordWithNew(email, newPassword); // ЁЯФБ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Кр╕╖р╣Ир╕нр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И
  });
</script>
