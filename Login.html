<!-- Login.html -->
<div class="container">
  <h4 class="center-align">เข้าสู่ระบบ</h4>
  <form id="loginForm">
    <label>อีเมล</label>
    <input type="email" name="email" required>

    <label>รหัสผ่าน</label>
    <input type="password" name="password" required>

    <div class="center-align" style="margin-top: 1rem;">
      <button class="btn blue" type="submit">เข้าสู่ระบบ</button>
    </div>
  </form>
</div>

<script>
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(this).entries());

    google.script.run.withSuccessHandler(result => {
      if (result.success) {
        M.toast({ html: '✅ เข้าสู่ระบบสำเร็จ' });
        loadView('calendar');
      } else {
        M.toast({ html: '❌ อีเมลหรือรหัสผ่านไม่ถูกต้อง' });
      }
    }).loginUser(data);
  });
</script>
